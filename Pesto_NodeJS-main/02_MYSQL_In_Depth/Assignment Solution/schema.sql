CREATE TABLE CITIES (CITY CHAR(20), STATE CHAR(20));

CREATE TABLE WAREHOUSES (WID INTEGER, WNAME CHAR(30), LOCATION CHAR(20));

CREATE TABLE STORES (SID INTEGER, STORE_NAME CHAR(20), LOCATION_CITY CHAR(20))

CREATE TABLE CUSTOMER (CNO INTEGER, CNAME CHAR(50), ADDR VARCHAR(50), CU_CITY CHAR(20))

CREATE TABLE ORDERS (ONO INT, ODATE DATE)

CREATE TABLE ITEMS (ITEMNO INTEGER, DESCRIPTION TEXT, WEIGHT DECIMAL(5,2), COST DECIMAL(5,2))


ALTER TABLE pesto.WAREHOUSES ADD EXTRA json NULL;


ALTER TABLE CITIES
ADD PRIMARY KEY (CITY);

ALTER TABLE WAREHOUSES
ADD CONSTRAINT fk_warehouses_cities FOREIGN KEY (LOCATION) REFERENCES CITIES(CITY);

ALTER TABLE WAREHOUSES 
ADD PRIMARY KEY (WID);

ALTER TABLE STORES
ADD COLUMN WID INTEGER,
ADD CONSTRAINT fk_stores_warehouses FOREIGN KEY (WID) REFERENCES WAREHOUSES(WID);

ALTER TABLE CUSTOMER  
ADD PRIMARY KEY (CNO);

ALTER TABLE ORDERS
ADD COLUMN CNO INTEGER,
ADD CONSTRAINT fk_orders_customer FOREIGN KEY (CNO) REFERENCES CUSTOMER(CNO);

ALTER TABLE ITEMS  
ADD PRIMARY KEY (ITEMNO);

ALTER TABLE ORDERS  
ADD PRIMARY KEY (ONO);


CREATE TABLE ORDER_ITEMS (
    ITEMNO INTEGER,
    ONO INT,
    ordered_quantity INT,
    CONSTRAINT fk_order_items_items FOREIGN KEY (ITEMNO) REFERENCES ITEMS(ITEMNO),
    CONSTRAINT fk_order_items_orders FOREIGN KEY (ONO) REFERENCES ORDERS(ONO)
);

ALTER TABLE STORES  
ADD PRIMARY KEY (SID);

CREATE TABLE STORE_ITEMS (
    SID INTEGER,
    ITEMNO INTEGER,
    quantity INT,
    CONSTRAINT fk_store_items_stores FOREIGN KEY (SID) REFERENCES STORES(SID),
    CONSTRAINT fk_store_items_items FOREIGN KEY (ITEMNO) REFERENCES ITEMS(ITEMNO)
);

INSERT INTO WAREHOUSES (WID, WNAME, LOCATION, `EXTRA`) VALUES
(1, 'Warehouse A', 'Pune', '{"capacity": 1000}'),
(2, 'Warehouse B', 'Mumbai', '{"capacity": 800}'),
(3, 'Warehouse C', 'Delhi', '{"capacity": 1200}'),
(4, 'Warehouse D', 'Bangalore', '{"capacity": 900}');

INSERT INTO STORES (SID, STORE_NAME, LOCATION_CITY) VALUES
(1, 'Store 1', 'Pune'),
(2, 'Store 2', 'Mumbai'),
(3, 'Store 3', 'Pune'),
(4, 'Store 4', 'Delhi');

INSERT INTO CUSTOMER (CNO, CNAME, ADDR, CU_CITY) VALUES
(101, 'Mr. Patil', '123 Main St', 'Pune'),
(102, 'Mrs. Sharma', '456 Central Ave', 'Mumbai'),
(103, 'Mr. Singh', '789 1st Street', 'Delhi'),
(104, 'Ms. Gupta', '101 Second Road', 'Bangalore'),
(105, 'Mr. Kumar', '456 Third Avenue', 'Chennai');

INSERT INTO ORDERS (ONO, ODATE) VALUES
(1, '2023-06-15'),
(2, '2023-06-16'),
(3, '2023-06-17'),
(4, '2023-06-18'),
(5, '2023-06-19');

INSERT INTO ITEMS (ITEMNO, DESCRIPTION, WEIGHT, COST) VALUES
(101, 'Laptop', 2.5, 120.50),
(102, 'Smartphone', 0.5, 800.00),
(103, 'TV', 15.0, 900.00),
(104, 'Microwave Oven', 10.0, 500.00),
(105, 'Refrigerator', 25.0, 700.00),
(106, 'Washing Machine', 30.0, 990.00);


INSERT INTO STORE_ITEMS (SID, ITEMNO, quantity) VALUES
(1, 101, 20),
(1, 102, 30),
(2, 103, 15), 
(2, 104, 10), 
(3, 105, 5),  
(4, 106, 8); 

INSERT INTO ORDER_ITEMS (ONO, ITEMNO, ordered_quantity) VALUES
(1, 101, 1), 
(1, 102, 2), 
(2, 103, 1), 
(3, 104, 1),
(4, 105, 1), 
(5, 106, 1);




